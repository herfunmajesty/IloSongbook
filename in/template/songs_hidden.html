<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
<title>Krakow Ukulele & Sing Tuesdays</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
<style>
<style>
.highlight {background-color: lemonchiffon; font-weight: bold;}
.chord { font-weight: bold; color:red}
ul { list-style: none; padding-left: 0px; }
#options a {text-decoration: underline;}
#songs a {text-decoration: none;}
@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');
.montserrat-h3 {
	font-family: 'Montserrat', sans-serif;
	font-weight: 300; /* Waga 300 odpowiada Montserrat Light */
}
.toggle-button {
	background-color: #eee;
	border: 3px solid #ccc;
	padding: 3px 5px;
	margin-right: 5px;
	cursor: pointer;
}
.bold-text {
    font-weight: bold;
    font-style: normal; 
	}
.italic-text {
	font-style: italic;
    font-weight: normal;
	}	
</style>

</head>
<body>

<header class="container">
    <div class="m-2 mb-4 text-center">
        <img src="/images/ukulele-krakow.png" class="img-fluid" alt="Krakow Ukulele" width="200">
    </div>
</header>

<div class="container">
<div class="row justify-content-center">
    
    <div id="list" class="col-lg-8 col-md-10 col-sm-12 my-3"> <!-- zachowania kontenerÃ³w dla rÃ³Å¼nych typÃ³w ekranÃ³w + margin-->

        <h4>Krakow Ukulele & Sing Tuesdays</h4>

		<!--<div id="infoBox" style="position: fixed; right: 20px; top: 20px; border: 1px solid black; padding: 10px;">
			<p id="sorting method" style="font-size: xx-small;"></p>
		</div>-->
		
		<p id="sorting method"></p>
		
		
        <div class="mt-2">
			<h6>Songs</h6>
			<ul id="songs">
				{% for song in songs %}
					<li>
						<a href="{{song.html_name}}.html" name="{{song.Number}}">
						{{song.Number}} - {{song.Title}} 
						</a>
						<small> - 
							<em> {{song.Artist}} -	</em> 
						</small>
						<span class= "text-{{song.l_tr}}" >
							<small><b>{{song.Level}}</b></small>
						</span>
					</li>
				{% endfor %}
			</ul>
		</div>
       
    </div>

    <hr/>
			
    <div class="m-2 my-4 text-center">
        <img src="/images/qrcode.png" class="img-fluid" alt="QR Code" width="200">
    </div>
		<div class="m-2 my-4 text-center"><li><a href="archive/archive.html">Archiwum</a></li>
	<li><a href="new/test.html">Test</a></li>
	</div>

</div>
</div>


<script>
	document.addEventListener('DOMContentLoaded', () => {
		const toggleButtons = document.querySelectorAll('.toggle-button');
		const savedState = JSON.parse(sessionStorage.getItem('buttonState'));
		const songsList = document.getElementById('songs'); // ID twojej listy piosenek
		console.log('Zachowane stany przyciskè´¸w: ', savedState);
		if (savedState === null) {
			// Jeè‰£li savedState jest null, oznacz wszystkie przyciski jako aktywne
			toggleButtons.forEach(button => {
				if (button.name !== 'New') {
					button.classList.add('active');
				}
			});
		} else {
			// W przeciwnym razie odczytaj stan przyciskè´¸w z sessionStorage
			toggleButtons.forEach(button => {
				if (button.name !== 'New') {
					if (savedState.includes(button.name)) {
						button.classList.add('active');
					}
				}
			});
		}
	
		toggleButtons.forEach(button => {
			// Dla przyciskè´¸w wszystkich bez wyjè†®tku
			button.addEventListener('click', () => {
				button.classList.toggle('active');
				console.log('zmiana stany przyciskè´¸w: ', button.name);
				filterSongs();
				saveButtonState();
			});
		});
		toggleButtons.forEach(button => {
			console.log(`Przycisk "${button.name}" jest ${button.classList.contains('active') ? 'aktywny' : 'nieaktywny'}`);
		});
		function saveButtonState() {
			const activeButtons = Array.from(toggleButtons).filter(btn => btn.classList.contains('active'));
			sessionStorage.setItem('buttonState', JSON.stringify(activeButtons.map(btn => btn.name)));
		}
		function filterSongs() {
			const activeButtons = document.querySelectorAll('.toggle-button.active');
			console.log("Aktywne przyciski: ", activeButtons);
			const allSongs = songsList.querySelectorAll('li');

			allSongs.forEach(song => {
				const level = song.querySelector('span small b').textContent;
				var shouldDisplay = Array.from(activeButtons).some(btn => btn.name === level);
				song.style.display = shouldDisplay ? 'block' : 'none';
				activeButtons.forEach(button => {
					if (button.name === 'New') {
						const title = song.querySelector('a').textContent;
						shouldDisplay = title.includes('ðŸ”¥');
						if (song.style.display === 'block'){
							song.style.display = shouldDisplay ? 'block' : 'none';}
					}
				});
			});
		}
	});

</script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const songsList = document.getElementById('songs'); // ID twojej listy piosenek
        const sortByTitleButton = document.getElementById('sortByTitle');
        const sortByArtistButton = document.getElementById('sortByArtist');
		const myArtElements = document.querySelectorAll('.my-art'); // ZnajdÅº wszystkie elementy o klasie "my-art"
		const myLevElements = document.querySelectorAll('.my-lev'); // ZnajdÅº wszystkie elementy o klasie "my-lev"
		//sortByTitleButton.checked = true; // Zaznacz pole wyboru
		// Wylacz przycisk "Sort by Artist" na poczatku
        sortByArtistButton.classList.remove('active');

        sortByTitleButton.addEventListener('click', () => {
            sortByTitle();
            sortByArtistButton.classList.remove('active'); // Wyè‰‚è†®cz drugi przycisk
            sortByTitleButton.classList.add('active'); // Zaznacz pierwszy przycisk
			var s_variant=true;
			// Aktualizuj wartoÅ›ci w infoBox
			document.getElementById('sorting method').textContent = 'sort by title: ' + s_variant;
			myArtElements.forEach(element => {
				element.classList.remove('bold-text'); // Dodaj klasÄ™ "bold-text" do kaÅ¼dego elementu
			});	
			myLevElements.forEach(element => {
				element.classList.remove('italic-text');
			});

        });

        sortByArtistButton.addEventListener('click', () => {
            sortByArtist();
            sortByTitleButton.classList.remove('active'); // Wyè‰‚è†®cz pierwszy przycisk
            sortByArtistButton.classList.add('active'); // Zaznacz drugi przycisk
			s_variant=false;
			// Aktualizuj wartoÅ›ci w infoBox
			document.getElementById('sorting method').textContent = 'sort by title: ' + s_variant;
			myArtElements.forEach(element => {
				element.classList.add('bold-text'); // Dodaj klasÄ™ "bold-text" do kaÅ¼dego elementu
			});
			myLevElements.forEach(element => {
				element.classList.add('italic-text'); // Dodaj klasÄ™ "bold-text" do kaÅ¼dego elementu
			});
        });
		
        function sortByTitle() {
			const sortedSongs = Array.from(songsList.querySelectorAll('li'))
            .sort((a, b) => {
				// Pobierz nazwè‡‹ z atrybutu href
				var nameA = a.querySelector('a').getAttribute('href');
				var nameB = b.querySelector('a').getAttribute('href');
				nameA = nameA.replace(/^ðŸ”¥/i, '');
				nameB = nameB.replace(/^ðŸ”¥/i, '');
				nameA = nameA.replace(/^ðŸŽ‚/i, '');
				nameB = nameB.replace(/^ðŸŽ‚/i, '');
				// Porè´¸wnaj nazwy
				return nameA.localeCompare(nameB);
				
				// Wyè‰£wietl wartoè‰£ci artystè´¸w w konsoli
				console.log('Title A:', nameA);
				console.log('Title B:', nameB);
				
                return nameA.localeCompare(nameB);
				
            });
			songsList.innerHTML = ''; // Wyczyè‰£è†° listè‡‹
			sortedSongs.forEach(song => songsList.appendChild(song));
        }

        function sortByArtist() {
			const sortedSongs = Array.from(songsList.querySelectorAll('li'))
				.sort((a, b) => {
					var artistA = a.querySelector('em').textContent;
					artistA = artistA.replace(/^by The\s+/i, '');
					artistA = artistA.replace(/^by\s+/i, '');
					var artistB = b.querySelector('em').textContent;
					artistB = artistB.replace(/^by The\s+/i, '');
					artistB = artistB.replace(/^by\s+/i, '');

					return artistA.localeCompare(artistB, 'en', { sensitivity: 'base' });
				});
			songsList.innerHTML = ''; // Wyczyè‰£è†° listè‡‹
			sortedSongs.forEach(song => songsList.appendChild(song));
			}
		});
</script>
</body>
</html>
